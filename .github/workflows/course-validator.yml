name: Smart Course Validator
on: [push, pull_request]

jobs:
  course-requirements:
    runs-on: ubuntu-latest
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v4

      # ======================
      # –ë–õ–û–ö 1: –ü–ê–†–ê–î–ò–ì–ú–´ SOFTWARE
      # ======================
      - name: 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–¥–∏–≥–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        run: |
          echo "=== –ê–ù–ê–õ–ò–ó –ü–ê–†–ê–î–ò–ì–ú SOFTWARE ==="
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ Software 1.0 (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞)
          if grep -r "addEventListener\|querySelector\|createElement" script.js > /dev/null; then
            echo "‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (Software 1.0)"
          else
            echo "‚ö†Ô∏è  –í –∫–æ–¥–µ –º–∞–ª–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —è–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ Software 1.0"
          fi
          
          # –ò—â–µ–º –ø—Ä–∏–∑–Ω–∞–∫–∏ Software 3.0 (AI/LLM) - –¥–ª—è –±—É–¥—É—â–µ–≥–æ
          if grep -ri "llm\|ai\|openai\|huggingface\|generate.*description" . --include="*.js" --include="*.md" > /dev/null; then
            echo "üéØ –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–∏–∑–Ω–∞–∫–∏ Software 3.0 (AI/LLM)"
          else
            echo "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å AI-–º–æ–¥—É–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏–π"
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
          echo "üìä –í—ã–≤–æ–¥: –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Software 1.0 —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º –¥–ª—è Software 3.0"

      # ======================
      # –ë–õ–û–ö 2: –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ò Mermaid
      # ======================
      - name: 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
        run: |
          echo "=== –ü–†–û–í–ï–†–ö–ê –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò ==="
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º README –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É
          README_LINES=$(wc -l < README.md 2>/dev/null || echo "0")
          if [ $README_LINES -gt 30 ]; then
            echo "‚úÖ README –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—ã–π ($README_LINES —Å—Ç—Ä–æ–∫)"
          else
            echo "‚ö†Ô∏è  README –¥–æ–≤–æ–ª—å–Ω–æ –∫—Ä–∞—Ç–∫–∏–π ($README_LINES —Å—Ç—Ä–æ–∫)"
          fi
          
          # –ò—â–µ–º Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã
          if grep -q "```mermaid" README.md; then
            MERMAID_COUNT=$(grep -c "```mermaid" README.md)
            echo "‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ Mermaid-–¥–∏–∞–≥—Ä–∞–º–º–∞ (–≤—Å–µ–≥–æ: $MERMAID_COUNT)"
          else
            echo "‚ùå Mermaid-–¥–∏–∞–≥—Ä–∞–º–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ README"
            echo "   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –¥–æ–±–∞–≤—å—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É"
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É README
          if grep -q "##.*–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞\|##.*Architecture" README.md; then
            echo "‚úÖ –í README –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ"
          fi

      # ======================
      # –ë–õ–û–ö 3: –ö–ê–ß–ï–°–¢–í–û –ö–û–î–ê –ò GIT
      # ======================
      - name: 3Ô∏è‚É£ –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ Git
        run: |
          echo "=== –ê–ù–ê–õ–ò–ó –ö–ê–ß–ï–°–¢–í–ê –ö–û–î–ê ==="
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º .gitignore
          if [ -f ".gitignore" ]; then
            GITIGNORE_LINES=$(wc -l < .gitignore)
            echo "‚úÖ .gitignore –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç ($GITIGNORE_LINES –ø—Ä–∞–≤–∏–ª)"
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã
            if grep -q "node_modules\|.env\|.DS_Store" .gitignore; then
              echo "‚úÖ .gitignore —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞"
            fi
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
          if grep -r "api_key\|password\|secret\|token" . --include="*.js" --include="*.json" 2>/dev/null | grep -v "YOUR_HF_TOKEN\|YOUR_API_KEY" | head -3; then
            echo "‚ùå –í–ù–ò–ú–ê–ù–ò–ï: –í–æ–∑–º–æ–∂–Ω–æ, –Ω–∞–π–¥–µ–Ω—ã –∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã!"
          else
            echo "‚úÖ –Ø–≤–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ"
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
          echo "üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:"
          ls -la | head -10

      # ======================
      # –ë–õ–û–ö 4: –î–ï–ü–õ–û–ô –ò –î–ï–ú–û
      # ======================
      - name: 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–º–æ –∏ –¥–µ–ø–ª–æ—è
        run: |
          echo "=== –ü–†–û–í–ï–†–ö–ê –î–ï–ú–û-–í–ï–†–°–ò–ò ==="
          
          # –ò—â–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –¥–µ–º–æ –≤ README
          if grep -q "vercel.app\|github.io\|demo\|–¥–µ–º–æ" README.md; then
            echo "‚úÖ –í README –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—é"
          else
            echo "‚ö†Ô∏è  –í README –Ω–µ—Ç —è–≤–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–µ–º–æ"
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ index.html –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ SPA
          if grep -q "<svg\|canvas\|div.*id" index.html; then
            echo "‚úÖ HTML —Å–æ–¥–µ—Ä–∂–∏—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"
          fi

      # ======================
      # –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢
      # ======================
      - name: üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
        run: |
          echo "=============================================="
          echo "üéì –û–¢–ß–Å–¢ –ü–û –ö–£–†–°–£ '–°–û–í–†–ï–ú–ï–ù–ù–´–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´'"
          echo "=============================================="
          echo "‚úÖ –ü–†–û–ô–î–ï–ù–û:"
          echo "   - –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞"
          echo "   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README.md)"
          echo "   - CI/CD –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
          echo ""
          echo "üéØ –î–õ–Ø –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ô –û–¶–ï–ù–ö–ò –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø:"
          echo "   1. –î–æ–±–∞–≤–∏—Ç—å Mermaid-–¥–∏–∞–≥—Ä–∞–º–º—É (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)"
          echo "   2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å AI-–º–æ–¥—É–ª—å (Software 3.0)"
          echo "   3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π"
          echo ""
          echo "üîó –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –æ–ø–∏—Å–∞–Ω—ã –≤ README.md"
          echo "=============================================="
