name: Smart Course Validator
on: [push, pull_request]

jobs:
  course-requirements:
    runs-on: ubuntu-latest
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v4

      # –ë–õ–û–ö 1: –ü–ê–†–ê–î–ò–ì–ú–´ SOFTWARE (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
      - name: 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–¥–∏–≥–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        run: |
          echo "=== –ê–ù–ê–õ–ò–ó –ü–ê–†–ê–î–ò–ì–ú SOFTWARE ==="
          
          if grep -q "addEventListener\|querySelector\|createElement" script.js 2>/dev/null; then
            echo "‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (Software 1.0)"
          else
            echo "‚ö†Ô∏è  –í –∫–æ–¥–µ –º–∞–ª–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —è–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ Software 1.0"
          fi
          
          if grep -ri "llm\|ai\|openai\|huggingface" . --include="*.js" --include="*.md" 2>/dev/null; then
            echo "üéØ –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–∏–∑–Ω–∞–∫–∏ Software 3.0 (AI/LLM)"
          else
            echo "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å AI-–º–æ–¥—É–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏–π"
          fi
          
          echo "üìä –í—ã–≤–æ–¥: –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Software 1.0 —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º –¥–ª—è Software 3.0"

      # –ë–õ–û–ö 2: –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ò Mermaid
      - name: 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
        run: |
          echo "=== –ü–†–û–í–ï–†–ö–ê –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò ==="
          
          if [ -f "README.md" ]; then
            README_LINES=$(wc -l < README.md)
            if [ "$README_LINES" -gt 30 ]; then
              echo "‚úÖ README –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—ã–π ($README_LINES —Å—Ç—Ä–æ–∫)"
            else
              echo "‚ö†Ô∏è  README –¥–æ–≤–æ–ª—å–Ω–æ –∫—Ä–∞—Ç–∫–∏–π ($README_LINES —Å—Ç—Ä–æ–∫)"
            fi
            
            if grep -q '```mermaid' README.md; then
              MERMAID_COUNT=$(grep -c '```mermaid' README.md)
              echo "‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ Mermaid-–¥–∏–∞–≥—Ä–∞–º–º–∞ (–≤—Å–µ–≥–æ: $MERMAID_COUNT)"
            else
              echo "‚ùå Mermaid-–¥–∏–∞–≥—Ä–∞–º–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ README"
            fi
          else
            echo "‚ùå –§–∞–π–ª README.md –Ω–µ –Ω–∞–π–¥–µ–Ω"
          fi

      # –ë–õ–û–ö 3: –ö–ê–ß–ï–°–¢–í–û –ö–û–î–ê
      - name: 3Ô∏è‚É£ –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ Git
        run: |
          echo "=== –ê–ù–ê–õ–ò–ó –ö–ê–ß–ï–°–¢–í–ê –ö–û–î–ê ==="
          
          if [ -f ".gitignore" ]; then
            GITIGNORE_LINES=$(wc -l < .gitignore)
            echo "‚úÖ .gitignore –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç ($GITIGNORE_LINES –ø—Ä–∞–≤–∏–ª)"
          else
            echo "‚ö†Ô∏è  .gitignore –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
          fi
          
          # –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ–∫—Ä–µ—Ç—ã
          echo "üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª—É—á–∞–π–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã..."
          find . -type f \( -name "*.js" -o -name "*.json" \) -exec grep -l "api_key\|password\|secret\|token" {} \; 2>/dev/null | head -2

      # –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢
      - name: üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
        run: |
          echo "========================================"
          echo "üéì –û–¢–ß–Å–¢ –ü–û –ö–£–†–°–£"
          echo "========================================"
          echo "üìà –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –£–õ–£–ß–®–ï–ù–ò–Ø –û–¶–ï–ù–ö–ò:"
          echo "1. –î–æ–±–∞–≤—å—Ç–µ Mermaid-–¥–∏–∞–≥—Ä–∞–º–º—É –≤ README"
          echo "2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ AI-–º–æ–¥—É–ª—å (Software 3.0)"
          echo "3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ CI/CD"
          echo ""
          echo "‚úÖ –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°:"
          echo "   - CI/CD –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
          echo "   - –ü—Ä–æ–µ–∫—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω"
          echo "   - –î–µ–º–æ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ Vercel"
          echo "========================================"
