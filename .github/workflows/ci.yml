name: CI/CD Pipeline
on: [push, pull_request]

jobs:
  validate-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ” Validate Project Structure
        run: |
          echo "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²..."
          REQUIRED_FILES=("index.html" "style.css" "script.js" "README.md")
          for file in "${REQUIRED_FILES[@]}"; do
            if [ ! -f "$file" ]; then
              echo "âŒ ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚: $file"
              exit 1
            fi
          done
          echo "âœ… Ğ’ÑĞµ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğµ"

      - name: ğŸ› Lint JavaScript
        run: |
          if [ -f "script.js" ]; then
            echo "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸ÑĞ° JS..."
            node -c script.js && echo "âœ… Ğ¡Ğ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ JS ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚ĞµĞ½"
          fi

      - name: ğŸ“Š Check File Sizes
        run: |
          echo "ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ:"
          find . -type f -name "*.mp3" -o -name "*.jpg" -o -name "*.png" | \
            xargs ls -lh 2>/dev/null | head -5 || true
